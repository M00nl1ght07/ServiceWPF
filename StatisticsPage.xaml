<Page x:Class="ServiceWPF.StatisticsPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="Статистика"
      Background="White">

    <ScrollViewer>
        <StackPanel Margin="20">
            <!-- Общая статистика -->
            <TextBlock Text="Общая статистика"
                     FontSize="24"
                     FontWeight="Medium"
                     Margin="0,0,0,20"/>

            <WrapPanel>
                <!-- Общее количество заявок -->
                <Border Background="#E3F2FD"
                        Padding="20"
                        CornerRadius="4"
                        Margin="0,0,20,20"
                        Width="200">
                    <StackPanel>
                        <TextBlock Text="Всего заявок"
                                 FontWeight="Medium"/>
                        <TextBlock x:Name="TotalRequestsCount"
                                 Text="0"
                                 FontSize="24"
                                 FontWeight="Medium"
                                 Margin="0,10,0,0"/>
                    </StackPanel>
                </Border>
            </WrapPanel>

            <!-- Статистика по статусам -->
            <TextBlock Text="Статистика по статусам"
                     FontSize="20"
                     FontWeight="Medium"
                     Margin="0,20"/>

            <ListView x:Name="StatusStatsList"
                     BorderThickness="0"
                     Background="Transparent"
                     MaxHeight="300">
                <ListView.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="{Binding Status}"
                                     Width="200"/>
                            <TextBlock Text="{Binding Count}"
                                     FontWeight="Medium"/>
                        </StackPanel>
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>

            <!-- Статистика по приоритетам -->
            <TextBlock Text="Статистика по приоритетам"
                     FontSize="20"
                     FontWeight="Medium"
                     Margin="0,20"/>

            <ListView x:Name="PriorityStatsList"
                     BorderThickness="0"
                     Background="Transparent"
                     MaxHeight="300">
                <ListView.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="{Binding Priority}"
                                     Width="200"/>
                            <TextBlock Text="{Binding Count}"
                                     FontWeight="Medium"/>
                        </StackPanel>
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>

            <!-- Топ исполнителей -->
            <TextBlock Text="Топ исполнителей"
                     FontSize="20"
                     FontWeight="Medium"
                     Margin="0,20"/>

            <ListView x:Name="TopExecutorsList"
                     BorderThickness="0"
                     Background="Transparent"
                     MaxHeight="300">
                <ListView.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="{Binding Name}"
                                     Width="200"/>
                            <TextBlock>
                                <Run Text="{Binding CompletedCount}"/>
                                <Run Text=" выполнено"/>
                            </TextBlock>
                        </StackPanel>
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>

            <!-- Среднее время выполнения -->
            <TextBlock Text="Среднее время выполнения заявок"
                     FontSize="20"
                     FontWeight="Medium"
                     Margin="0,20"/>

            <TextBlock x:Name="AverageCompletionTime"
                     Text="0 часов"
                     FontSize="16"
                     Margin="0,10"/>
        </StackPanel>
    </ScrollViewer>
</Page>